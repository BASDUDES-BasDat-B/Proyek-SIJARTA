{% extends "base.html" %}

{% block title %}Pekerjaan Jasa{% endblock %}

{% block content %}
<!-- Header Section -->
<div class="bg-blue-500 text-white py-6 mb-6">
    <div class="max-w-4xl mx-auto px-4">
        <h1 class="text-2xl font-bold text-center">Pekerjaan Jasa</h1>
        <p class="text-center mt-2">Kelola dan kerjakan pesanan jasa sesuai kategori Anda.</p>
    </div>
</div>

<!-- Filter Section -->
<form method="get" class="mb-4 max-w-lg mx-auto">
    <label for="kategori" class="block mb-2 font-medium">Pilih Kategori:</label>
    <select name="kategori" id="kategori" class="p-2 border rounded w-full mb-4" onchange="this.form.submit()">
        <option value="">-- Pilih Kategori --</option>
        {% for kategori in kategori_list %}
            <option value="{{ kategori.id }}" {% if kategori.id == selected_kategori %}selected{% endif %}>
                {{ kategori.nama }}
            </option>
        {% endfor %}
    </select>

    <label for="subkategori" class="block mb-2 font-medium">Pilih Subkategori:</label>
    <select name="subkategori" id="subkategori" class="p-2 border rounded w-full mb-4" onchange="this.form.submit()">
        <option value="">-- Pilih Subkategori --</option>
        {% for subkategori in subkategori_list %}
            <option value="{{ subkategori.id }}" {% if subkategori.id == selected_subkategori %}selected{% endif %}>
                {{ subkategori.nama }}
            </option>
        {% endfor %}
    </select>
</form>

<!-- Daftar Pesanan Section -->
<div class="max-w-3xl mx-auto">
    {% for pesanan in pesanan_list %}
    <div class="border rounded p-4 mb-6 shadow-md">
        <p><strong>Nama Subkategori:</strong> {{ pesanan.subkategori }}</p>
        <p><strong>Nama Pelanggan:</strong> {{ pesanan.nama_pelanggan }}</p>
        <p><strong>Tanggal Pemesanan:</strong> {{ pesanan.tanggal_pemesanan }}</p>
        <p><strong>Tanggal Pekerjaan:</strong> {{ pesanan.tanggal_pekerjaan }}</p>
        <p><strong>Total Biaya:</strong> Rp {{ pesanan.total_biaya }}</p>
        <div class="flex justify-center mt-4">
            <button class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded">Kerjakan Pesanan</button>
        </div>
    </div>
    {% empty %}
    <p class="text-center text-gray-600">Tidak ada pesanan jasa yang tersedia.</p>
    {% endfor %}
</div>
{% endblock %}
